@import ../sass/css3-mixins
@import ~sass-flex-mixin/_flex

.modal-transition-group
  position: fixed
  z-index: 1040
  top: 0
  left: 0
  right: 0
  bottom: 0
  pointer-events: none

  &.absolute,
  .modal-transition-group
    position: absolute

  .modal-backdrop
    display: block
    position: absolute

  .modal
    display: block
    position: absolute
    pointer-events: initial

    @media (max-height: 500px) and (max-width: 400px)
      > .modal-dialog
        margin: 10px

    @media (max-height: 500px) and (min-width: 768px)
      > .modal-dialog
        margin: 10px auto

    &.clamp-height
      // if screen height is less than 400px, .modal-body will
      // be pretty short -- use default behavior in that case
      // (entire modal will scroll)
      @media(min-height:400px)
        // without this the shadow will get clipped at the bottom
        overflow: visible

        // use top/bottom margin here instead of .modal-dialog
        // so that .modal-dialog can use height: 100%
        margin: 30px

        @media (max-height: 500px), (max-width: 400px)
          margin: 10px

        > .modal-dialog
          margin: 0 auto
          // height must be explicitly set for .modal-content to
          // use percentage max-height
          height: 100%

          > .modal-content
            @include flexbox
            @include flex-direction(column)
            max-height: 100%

            > .modal-header,
            > .modal-footer,
              // don't allow header/footer to grow or shrink
              @include flex(0 0 auto)

            > .modal-body
              // allow body to shrink but not grow
              @include flex(0 1 auto)
              // make body scrollable instead of entire modal
              overflow-y: auto

.modal-body.alert
  margin: 0

.mf-modal
  .modal-dialog
    @include transition(none)
    @include transform(translateY(0))

.modal-enter
  opacity: 0.01
  @include transform(translateY(-25%))
  &.modal-enter-active
    opacity: 1
    @include transform(translateY(0))
    @include transition(ease-out 0.3s)

.modal-leave
  opacity: 1
  @include transform(translateY(0))
  &.modal-leave-active
    opacity: 0.01
    @include transform(translateY(-25%))
    @include transition(ease-out 0.3s)

$modal-backdrop-opacity: 0.5

.modal-backdrop
  opacity: $modal-backdrop-opacity
  
  &.modal-enter
    opacity: 0.01
    @include transform(translateY(0))
    &.modal-enter-active
      opacity: $modal-backdrop-opacity

  &.modal-leave
    opacity: $modal-backdrop-opacity
    &.modal-leave-active
      opacity: 0.01
      @include transform(translateY(0))

// nested modals
.modal-transition-group .modal .modal-transition-group .modal
  .modal-dialog
    margin-top: -1px

  .modal-content,
  .modal-header
    border-top-left-radius: 0
    border-top-right-radius: 0

  &:not(.show-header) .modal-header
    display: none

  &.modal-enter
    opacity: 1
    .modal-dialog
      @include transform(translateY(-110%))
    &.modal-enter-active
      .modal-dialog
        @include transition(ease-out 0.3s)
        @include transform(translateY(0))

  &.modal-leave
    .modal-dialog
      @include transform(translateY(0))
    &.modal-leave-active
      .modal-dialog
        opacity: 1
        @include transition(ease-out 0.3s)
        @include transform(translateY(-110%))
